<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>여행 D-데이 & 짐 체크리스트</title>
  <meta name="description" content="간단한 여행 일정 D-데이와 짐꾸리기 체크리스트를 관리하세요. 오프라인에서도 작동합니다." />
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="icon" href="/assets/icons/icon-192.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/assets/icons/icon-192.svg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/assets/style.css" />
</head>
<body class="bg-sky-50 text-slate-800 min-h-screen">
  <header class="sticky top-0 z-10 backdrop-blur bg-white/70 border-b">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl sm:text-2xl font-bold tracking-tight">✈️ 여행 D-데이 & 체크리스트</h1>
      <div class="flex items-center gap-2">
        <button id="installBtn" class="btn-secondary hidden">앱 설치</button>
        <button id="exportBtn" class="btn-secondary">백업</button>
        <label class="btn-secondary cursor-pointer">
          복원<input id="importInput" type="file" accept="application/json" class="hidden" />
        </label>
        <a href="https://github.com/" target="_blank" class="btn-link">GitHub</a>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-6">
    <section class="mb-6">
      <div class="flex flex-col sm:flex-row sm:items-end gap-3 sm:gap-4">
        <div class="grow">
          <label class="block text-sm font-medium">여행 이름</label>
          <input id="tripName" class="input" placeholder="예: 스페인 가을여행" />
        </div>
        <div>
          <label class="block text-sm font-medium">출발일</label>
          <input id="tripDate" type="date" class="input" />
        </div>
        <div>
          <label class="block text-sm font-medium">체크리스트 템플릿</label>
          <select id="templateSelect" class="input">
            <option value="basic">기본</option>
            <option value="europe">유럽(가을/겨울)</option>
            <option value="beach">해변</option>
            <option value="business">출장</option>
          </select>
        </div>
        <button id="addTripBtn" class="btn-primary self-stretch sm:self-auto">여행 추가</button>
      </div>
    </section>

    <section>
      <ul id="tripList" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></ul>
    </section>

    <!-- ✅ form(method="dialog") 대신 div로 바꿔 자동 닫힘 방지 -->
    <dialog id="tripDialog" class="modal">
      <div class="modal-box">
        <header class="flex items-center justify-between mb-3">
          <h2 id="dialogTitle" class="text-lg font-semibold">여행 상세</h2>
          <button id="closeDialogBtn" class="btn-icon" title="닫기">✕</button>
        </header>
        <div class="space-y-3" id="dialogContent"></div>
      </div>
    </dialog>
  </main>

  <footer class="max-w-5xl mx-auto px-4 py-8 text-xs text-slate-500">
    <p>모든 데이터는 브라우저(LocalStorage)에 저장됩니다. 로그인/서버 불필요. 오프라인 지원.</p>
  </footer>

  <script src="/assets/app.js" type="module"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js');
      });
    }
  </script>
</body>
</html>
